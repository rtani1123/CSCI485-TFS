<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_45) on Sat Apr 26 14:54:47 PDT 2014 -->
<title>ChunkServer</title>
<meta name="date" content="2014-04-26">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ChunkServer";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ChunkServer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../Chunkserver/ChunkserverMetadata.html" title="class in Chunkserver"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?Chunkserver/ChunkServer.html" target="_top">Frames</a></li>
<li><a href="ChunkServer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">Chunkserver</div>
<h2 title="Class ChunkServer" class="title">Class ChunkServer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>java.rmi.server.RemoteObject</li>
<li>
<ul class="inheritance">
<li>java.rmi.server.RemoteServer</li>
<li>
<ul class="inheritance">
<li>java.rmi.server.UnicastRemoteObject</li>
<li>
<ul class="inheritance">
<li>Chunkserver.ChunkServer</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a>, java.io.Serializable, java.rmi.Remote</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">ChunkServer</span>
extends java.rmi.server.UnicastRemoteObject
implements <a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></pre>
<div class="block">This class handles chunkserver responsibilities. Each instance of chunkserver has a unique ID
 which is used by master, clients and other chunservers to connect to it.
 Each ChunkServer has a local CSMetadata object. Every time metadata changes it flushes that to disk.
 If it goes down and comes up again, it restore the CSmetadata file, if exists, to know which files it has.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>boghrati</dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../serialized-form.html#Chunkserver.ChunkServer">Serialized Form</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) java.util.Map&lt;java.lang.Integer,<a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#chunkservers">chunkservers</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) java.util.Map&lt;java.lang.Integer,<a href="../Interfaces/ClientInterface.html" title="interface in Interfaces">ClientInterface</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#clients">clients</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static java.lang.Integer</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#csIndex">csIndex</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) java.util.Map&lt;java.lang.String,<a href="../Chunkserver/ChunkserverMetadata.html" title="class in Chunkserver">ChunkserverMetadata</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#CSMetadata">CSMetadata</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#LEASETIME">LEASETIME</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../Interfaces/MasterInterface.html" title="interface in Interfaces">MasterInterface</a></code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#myMaster">myMaster</a></strong></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_java.rmi.server.RemoteObject">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;java.rmi.server.RemoteObject</h3>
<code>ref</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../Chunkserver/ChunkServer.html#ChunkServer()">ChunkServer</a></strong>()</code>
<div class="block">It creates a new instance of chunkserver.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#append(java.lang.String, byte[], int, int, boolean)">append</a></strong>(java.lang.String&nbsp;chunkhandle,
      byte[]&nbsp;payload,
      int&nbsp;length,
      int&nbsp;offset,
      boolean&nbsp;withSize)</code>
<div class="block">Appends to file at location chunkhandle and stores write time stamp in CSMetaData
 Data: payload</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#atomicAppend(java.lang.String, byte[], int, boolean)">atomicAppend</a></strong>(java.lang.String&nbsp;chunkhandle,
            byte[]&nbsp;payload,
            int&nbsp;length,
            boolean&nbsp;withSize)</code>
<div class="block">Atomic append to file at location chunkhandle.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#atomicAppendSecondary(java.lang.String, byte[], int, boolean, long)">atomicAppendSecondary</a></strong>(java.lang.String&nbsp;chunkhandle,
                     byte[]&nbsp;payload,
                     int&nbsp;length,
                     boolean&nbsp;withSize,
                     long&nbsp;offset)</code>
<div class="block">Called from the primary chunkserver.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#connectToChunkserver(java.lang.Integer)">connectToChunkserver</a></strong>(java.lang.Integer&nbsp;id)</code>
<div class="block">Connects ChunkServer(csIndex) to Client(index)</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#connectToClient(java.lang.Integer)">connectToClient</a></strong>(java.lang.Integer&nbsp;id)</code>
<div class="block">Connecting ChunkServer(csIndex) to Client(index)</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#connectToMaster()">connectToMaster</a></strong>()</code>
<div class="block">Format for connection should be "rmi:DOMAIN/ChunkserverID".</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#createDirectory(java.lang.String)">createDirectory</a></strong>(java.lang.String&nbsp;chunkhandle)</code>
<div class="block">Creates a directory locally to ChunkServer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#createFile(java.lang.String)">createFile</a></strong>(java.lang.String&nbsp;chunkhandle)</code>
<div class="block">Creates a file locally to ChunkServer.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#deleteDirectory(java.lang.String)">deleteDirectory</a></strong>(java.lang.String&nbsp;chunkhandle)</code>
<div class="block">Deletes a directory locally from ChunkServer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#deleteFile(java.lang.String)">deleteFile</a></strong>(java.lang.String&nbsp;chunkhandle)</code>
<div class="block">Deletes a file locally from ChunkServer.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#fetchAndRewrite(java.lang.String, int)">fetchAndRewrite</a></strong>(java.lang.String&nbsp;chunkhandle,
               int&nbsp;sourceID)</code>
<div class="block">ChunkServer recovery append.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#heartbeat()">heartbeat</a></strong>()</code>
<div class="block">Heartbeat message.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#main(java.lang.String[])">main</a></strong>(java.lang.String[]&nbsp;args)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#numFiles(java.lang.String)">numFiles</a></strong>(java.lang.String&nbsp;fullPath)</code>
<div class="block">Gets number of separate files in a given file</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#primaryLease(java.lang.String, java.util.List)">primaryLease</a></strong>(java.lang.String&nbsp;chunkhandle,
            java.util.List&lt;java.lang.Integer&gt;&nbsp;CServers)</code>
<div class="block">Sets CSMetadata primary lease times as well as appropriate secondary ChunkServers</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#read(java.lang.String, int, int)">read</a></strong>(java.lang.String&nbsp;chunkhandle,
    int&nbsp;offset,
    int&nbsp;length)</code>
<div class="block">Read file at an offset</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#readCompletely(java.lang.String)">readCompletely</a></strong>(java.lang.String&nbsp;chunkhandle)</code>
<div class="block">Read file completely</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Chunkserver/ChunkServer.html#setupChunkserverHost()">setupChunkserverHost</a></strong>()</code>
<div class="block">URL Protocol to establish RMI Server on ChunkserverSide.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.rmi.server.UnicastRemoteObject">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.rmi.server.UnicastRemoteObject</h3>
<code>clone, exportObject, exportObject, exportObject, unexportObject</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.rmi.server.RemoteServer">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.rmi.server.RemoteServer</h3>
<code>getClientHost, getLog, setLog</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.rmi.server.RemoteObject">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.rmi.server.RemoteObject</h3>
<code>equals, getRef, hashCode, toString, toStub</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>finalize, getClass, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="CSMetadata">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CSMetadata</h4>
<pre>java.util.Map&lt;java.lang.String,<a href="../Chunkserver/ChunkserverMetadata.html" title="class in Chunkserver">ChunkserverMetadata</a>&gt; CSMetadata</pre>
</li>
</ul>
<a name="chunkservers">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>chunkservers</h4>
<pre>java.util.Map&lt;java.lang.Integer,<a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a>&gt; chunkservers</pre>
</li>
</ul>
<a name="myMaster">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>myMaster</h4>
<pre><a href="../Interfaces/MasterInterface.html" title="interface in Interfaces">MasterInterface</a> myMaster</pre>
</li>
</ul>
<a name="clients">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clients</h4>
<pre>java.util.Map&lt;java.lang.Integer,<a href="../Interfaces/ClientInterface.html" title="interface in Interfaces">ClientInterface</a>&gt; clients</pre>
</li>
</ul>
<a name="csIndex">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>csIndex</h4>
<pre>static&nbsp;java.lang.Integer csIndex</pre>
</li>
</ul>
<a name="LEASETIME">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LEASETIME</h4>
<pre>public static final&nbsp;long LEASETIME</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../constant-values.html#Chunkserver.ChunkServer.LEASETIME">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ChunkServer()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ChunkServer</h4>
<pre>public&nbsp;ChunkServer()
            throws java.rmi.RemoteException</pre>
<div class="block">It creates a new instance of chunkserver.
 If there is an stored meta data, it restores that.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setupChunkserverHost()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setupChunkserverHost</h4>
<pre>public&nbsp;void&nbsp;setupChunkserverHost()</pre>
<div class="block">URL Protocol to establish RMI Server on ChunkserverSide.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/ChunkserverInterface.html#setupChunkserverHost()">setupChunkserverHost</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></code></dd>
</dl>
</li>
</ul>
<a name="connectToMaster()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connectToMaster</h4>
<pre>public&nbsp;void&nbsp;connectToMaster()</pre>
<div class="block">Format for connection should be "rmi:DOMAIN/ChunkserverID".
 ChunkserverID will be different for each instance of ChunkServer
 One detail to mention is that CSMaster will not be the same as
 MasterCS. There's actually a completely different call for master
 calling CS functions than CS calling master functions.
 
 For this, the master is hosted on dblab-29.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/ChunkserverInterface.html#connectToMaster()">connectToMaster</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></code></dd>
</dl>
</li>
</ul>
<a name="connectToClient(java.lang.Integer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connectToClient</h4>
<pre>public&nbsp;void&nbsp;connectToClient(java.lang.Integer&nbsp;id)</pre>
<div class="block">Connecting ChunkServer(csIndex) to Client(index)</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/ChunkserverInterface.html#connectToClient(java.lang.Integer)">connectToClient</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - </dd></dl>
</li>
</ul>
<a name="connectToChunkserver(java.lang.Integer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connectToChunkserver</h4>
<pre>public&nbsp;void&nbsp;connectToChunkserver(java.lang.Integer&nbsp;id)</pre>
<div class="block">Connects ChunkServer(csIndex) to Client(index)</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/ChunkserverInterface.html#connectToChunkserver(java.lang.Integer)">connectToChunkserver</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - </dd></dl>
</li>
</ul>
<a name="primaryLease(java.lang.String, java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>primaryLease</h4>
<pre>public&nbsp;void&nbsp;primaryLease(java.lang.String&nbsp;chunkhandle,
                java.util.List&lt;java.lang.Integer&gt;&nbsp;CServers)
                  throws java.rmi.RemoteException</pre>
<div class="block">Sets CSMetadata primary lease times as well as appropriate secondary ChunkServers</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/ChunkserverInterface.html#primaryLease(java.lang.String, java.util.List)">primaryLease</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - </dd><dd><code>CServers</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="createFile(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createFile</h4>
<pre>public&nbsp;boolean&nbsp;createFile(java.lang.String&nbsp;chunkhandle)
                   throws java.rmi.RemoteException</pre>
<div class="block">Creates a file locally to ChunkServer.
 ChunkServer then stores that data in a local metadata file.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/ChunkserverInterface.html#createFile(java.lang.String)">createFile</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>true if and only if the operation succeeded; false otherwise</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="createDirectory(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createDirectory</h4>
<pre>public&nbsp;boolean&nbsp;createDirectory(java.lang.String&nbsp;chunkhandle)
                        throws java.rmi.RemoteException</pre>
<div class="block">Creates a directory locally to ChunkServer.
 Chunkserver then stores that data in a local metadata file.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/ChunkserverInterface.html#createDirectory(java.lang.String)">createDirectory</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>true if and only if the operation succeeded; false otherwise</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="deleteFile(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteFile</h4>
<pre>public&nbsp;boolean&nbsp;deleteFile(java.lang.String&nbsp;chunkhandle)
                   throws java.rmi.RemoteException</pre>
<div class="block">Deletes a file locally from ChunkServer.
 Chunkserver then stores that information in a local metadata file.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/ChunkserverInterface.html#deleteFile(java.lang.String)">deleteFile</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>true if and only if the operation succeeded; false otherwise</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="deleteDirectory(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteDirectory</h4>
<pre>public&nbsp;boolean&nbsp;deleteDirectory(java.lang.String&nbsp;chunkhandle)
                        throws java.rmi.RemoteException</pre>
<div class="block">Deletes a directory locally from ChunkServer.
 Chunkserver then stores that information in a local metadata file.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/ChunkserverInterface.html#deleteDirectory(java.lang.String)">deleteDirectory</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>true if and only if the operation succeeded; false otherwise</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="readCompletely(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readCompletely</h4>
<pre>public&nbsp;byte[]&nbsp;readCompletely(java.lang.String&nbsp;chunkhandle)
                      throws java.rmi.RemoteException</pre>
<div class="block">Read file completely</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/ChunkserverInterface.html#readCompletely(java.lang.String)">readCompletely</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>true if and only if the operation succeeded; false otherwise</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="read(java.lang.String, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;byte[]&nbsp;read(java.lang.String&nbsp;chunkhandle,
          int&nbsp;offset,
          int&nbsp;length)
            throws java.rmi.RemoteException</pre>
<div class="block">Read file at an offset</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/ChunkserverInterface.html#read(java.lang.String, int, int)">read</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - </dd><dd><code>offset</code> - </dd><dd><code>length</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>true if and only if the operation succeeded; false otherwise</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="append(java.lang.String, byte[], int, int, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>append</h4>
<pre>public&nbsp;boolean&nbsp;append(java.lang.String&nbsp;chunkhandle,
             byte[]&nbsp;payload,
             int&nbsp;length,
             int&nbsp;offset,
             boolean&nbsp;withSize)
               throws java.rmi.RemoteException</pre>
<div class="block">Appends to file at location chunkhandle and stores write time stamp in CSMetaData
 Data: payload</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/ChunkserverInterface.html#append(java.lang.String, byte[], int, int, boolean)">append</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - </dd><dd><code>payload</code> - </dd><dd><code>length</code> - </dd><dd><code>offset</code> - </dd><dd><code>withSize</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>true if and only if the operation succeeded; false otherwise</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="atomicAppend(java.lang.String, byte[], int, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>atomicAppend</h4>
<pre>public&nbsp;boolean&nbsp;atomicAppend(java.lang.String&nbsp;chunkhandle,
                   byte[]&nbsp;payload,
                   int&nbsp;length,
                   boolean&nbsp;withSize)
                     throws java.rmi.RemoteException</pre>
<div class="block">Atomic append to file at location chunkhandle. It store the write time stamp in CSMetaData.
 Data: payload
 No offset specified. (determined by TFS)</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/ChunkserverInterface.html#atomicAppend(java.lang.String, byte[], int, boolean)">atomicAppend</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - </dd><dd><code>payload</code> - </dd><dd><code>length</code> - </dd><dd><code>withSize</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>true if and only if the operation succeeded; false otherwise</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="atomicAppendSecondary(java.lang.String, byte[], int, boolean, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>atomicAppendSecondary</h4>
<pre>public&nbsp;boolean&nbsp;atomicAppendSecondary(java.lang.String&nbsp;chunkhandle,
                            byte[]&nbsp;payload,
                            int&nbsp;length,
                            boolean&nbsp;withSize,
                            long&nbsp;offset)
                              throws java.rmi.RemoteException</pre>
<div class="block">Called from the primary chunkserver.
 Pushing data to secondary.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/ChunkserverInterface.html#atomicAppendSecondary(java.lang.String, byte[], int, boolean, long)">atomicAppendSecondary</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - </dd><dd><code>payload</code> - </dd><dd><code>length</code> - </dd><dd><code>withSize</code> - </dd><dd><code>offset</code> - offset in file at which to begin write</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if and only if the operation succeeded; false otherwise</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="fetchAndRewrite(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchAndRewrite</h4>
<pre>public&nbsp;void&nbsp;fetchAndRewrite(java.lang.String&nbsp;chunkhandle,
                   int&nbsp;sourceID)
                     throws java.rmi.RemoteException</pre>
<div class="block">ChunkServer recovery append.
 Reads the whole data from ChunkServer with ID equal to sourceID and rewrite its own local file.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/ChunkserverInterface.html#fetchAndRewrite(java.lang.String, int)">fetchAndRewrite</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - </dd><dd><code>sourceID</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="numFiles(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numFiles</h4>
<pre>public&nbsp;byte[]&nbsp;numFiles(java.lang.String&nbsp;fullPath)
                throws java.rmi.RemoteException</pre>
<div class="block">Gets number of separate files in a given file</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/ChunkserverInterface.html#numFiles(java.lang.String)">numFiles</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>fullPath</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>true if and only if the operation succeeded; false otherwise</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="heartbeat()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>heartbeat</h4>
<pre>public&nbsp;void&nbsp;heartbeat()
               throws java.rmi.RemoteException</pre>
<div class="block">Heartbeat message.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/ChunkserverInterface.html#heartbeat()">heartbeat</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/ChunkserverInterface.html" title="interface in Interfaces">ChunkserverInterface</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="main(java.lang.String[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ChunkServer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../Chunkserver/ChunkserverMetadata.html" title="class in Chunkserver"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?Chunkserver/ChunkServer.html" target="_top">Frames</a></li>
<li><a href="ChunkServer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
