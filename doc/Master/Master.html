<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_45) on Sat Apr 26 14:54:47 PDT 2014 -->
<title>Master</title>
<meta name="date" content="2014-04-26">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Master";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Master.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../Master/Master.CSInfo.html" title="class in Master"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?Master/Master.html" target="_top">Frames</a></li>
<li><a href="Master.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">Master</div>
<h2 title="Class Master" class="title">Class Master</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>java.rmi.server.RemoteObject</li>
<li>
<ul class="inheritance">
<li>java.rmi.server.RemoteServer</li>
<li>
<ul class="inheritance">
<li>java.rmi.server.UnicastRemoteObject</li>
<li>
<ul class="inheritance">
<li>Master.Master</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../Interfaces/MasterInterface.html" title="interface in Interfaces">MasterInterface</a>, java.io.Serializable, java.rmi.Remote</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">Master</span>
extends java.rmi.server.UnicastRemoteObject
implements <a href="../Interfaces/MasterInterface.html" title="interface in Interfaces">MasterInterface</a></pre>
<div class="block">"The Master maintains all file system metadata.  This includes the namespace, access control information,
 mapping from files to chunks, and the current locations of chunks.  It also controls system-wide activities
 such as lease management, garbage collection of orphaned chunks and chunk migration between chunkservers.
 The master periodically communicates with each chunkserver in HeartBeat messsages to give it instructions
 and collect its state."
        Ghemawat, S., Gobioff, H., & Leung, S. T. (2003). <i> The Google File System </i>.  Retrieved from
        http://static.googleusercontent.com/media/research.google.com/en//archive/gfs-sosp2003.pdf</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../serialized-form.html#Master.Master">Serialized Form</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.CSInfo.html" title="class in Master">Master.CSInfo</a></strong></code>
<div class="block">Class CSInfo is used by master to maintain metadata for connecting to various
 chunkservers.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.CSStatus.html" title="enum in Master">Master.CSStatus</a></strong></code>
<div class="block">Enum for Chunkserver Status.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.Heartbeat.html" title="class in Master">Master.Heartbeat</a></strong></code>
<div class="block">Heartbeat class runs on its own Thread, and periodically messages chunkservers to determine
 their status.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.MasterThread.html" title="class in Master">Master.MasterThread</a></strong></code>
<div class="block">Internal class to handle the thread within master to run the scheduler.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.Task.html" title="class in Master">Master.Task</a></strong></code>
<div class="block">The Task class is used for master to keep track of what is necessary
 to process a request.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.TaskType.html" title="enum in Master">Master.TaskType</a></strong></code>
<div class="block">Task type enum.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) java.util.Map&lt;java.lang.Integer,<a href="../Master/Master.CSInfo.html" title="class in Master">Master.CSInfo</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#chunkservers">chunkservers</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) java.util.Map&lt;java.lang.Integer,<a href="../Interfaces/ClientInterface.html" title="interface in Interfaces">ClientInterface</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#clients">clients</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../Utilities/Tree.html" title="class in Utilities">Tree</a></code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#directory">directory</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../Master/Master.Heartbeat.html" title="class in Master">Master.Heartbeat</a></code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#heartbeat">heartbeat</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static long</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#HEARTBEAT_DELAY">HEARTBEAT_DELAY</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../Utilities/OperationsLog.html" title="class in Utilities">OperationsLog</a></code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#log">log</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../Master/Master.MasterThread.html" title="class in Master">Master.MasterThread</a></code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#masterThread">masterThread</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#masterUp">masterUp</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static long</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#MINUTE">MINUTE</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#NOT_FOUND">NOT_FOUND</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) java.util.concurrent.Semaphore</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#stateChange">stateChange</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) java.util.List&lt;<a href="../Master/Master.Task.html" title="class in Master">Master.Task</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#tasks">tasks</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static java.lang.Integer</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#tempLock">tempLock</a></strong></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_java.rmi.server.RemoteObject">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;java.rmi.server.RemoteObject</h3>
<code>ref</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../Master/Master.html#Master()">Master</a></strong>()</code>
<div class="block">Constructor for the Master does the following:
        - Initializes a list of chunkservers and clients to which to connect.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#append(java.lang.String, int, int)">append</a></strong>(java.lang.String&nbsp;chunkhandle,
      int&nbsp;clientID,
      int&nbsp;reqID)</code>
<div class="block">Adds append task to scheduler.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#appendA(java.lang.String, int, int)">appendA</a></strong>(java.lang.String&nbsp;chunkhandle,
       int&nbsp;clientID,
       int&nbsp;reqID)</code>
<div class="block">The appendA function returns metadata sufficient for an append to the client
 that has requested it.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#atomicAppend(java.lang.String, int, int)">atomicAppend</a></strong>(java.lang.String&nbsp;chunkhandle,
            int&nbsp;clientID,
            int&nbsp;reqID)</code>
<div class="block">Adds atomicAppend task to scheduler.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#atomicAppendA(java.lang.String, int, int)">atomicAppendA</a></strong>(java.lang.String&nbsp;chunkhandle,
             int&nbsp;clientID,
             int&nbsp;reqID)</code>
<div class="block">The function atomicAppendA sends the client in clientID the metadata required
 for an atomic append.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#connectToChunkserver(java.lang.Integer)">connectToChunkserver</a></strong>(java.lang.Integer&nbsp;id)</code>
<div class="block">Connects to Chunkserver ID.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#connectToClient(java.lang.Integer)">connectToClient</a></strong>(java.lang.Integer&nbsp;id)</code>
<div class="block">Connects to Client ID</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#createDirectory(java.lang.String, int)">createDirectory</a></strong>(java.lang.String&nbsp;path,
               int&nbsp;clientID)</code>
<div class="block">Adds createDirectory task to scheduler.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#createDirectoryA(java.lang.String, int)">createDirectoryA</a></strong>(java.lang.String&nbsp;path,
                int&nbsp;clientID)</code>
<div class="block">The function createDirectoryA creates a directory within the master namespace.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#createDirectoryRedo(java.lang.String, int)">createDirectoryRedo</a></strong>(java.lang.String&nbsp;path,
                   int&nbsp;chunkserverID)</code>
<div class="block">The Chunkserver Restoration algorithm will call this method if a chunkserver needs to run
 a createDirectory to catch up with current version of data.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#createFile(java.lang.String, java.lang.String, int, int)">createFile</a></strong>(java.lang.String&nbsp;path,
          java.lang.String&nbsp;fileName,
          int&nbsp;numReplicas,
          int&nbsp;clientID)</code>
<div class="block">Adds createFile task to scheduler.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#createFileA(java.lang.String, java.lang.String, int, int)">createFileA</a></strong>(java.lang.String&nbsp;path,
           java.lang.String&nbsp;fileName,
           int&nbsp;numReplicas,
           int&nbsp;clientID)</code>
<div class="block">Function createFileA creates a new file in the master namespace.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#createFileRedo(java.lang.String, int)">createFileRedo</a></strong>(java.lang.String&nbsp;chunkhandle,
              int&nbsp;chunkserverID)</code>
<div class="block">The Chunkserver Restoration algorithm will call this method if a chunkserver needs to
 create a file it should have.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#deleteDirectory(java.lang.String, int)">deleteDirectory</a></strong>(java.lang.String&nbsp;path,
               int&nbsp;clientID)</code>
<div class="block">Adds deleteDirectory task to scheduler.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#deleteDirectoryA(java.lang.String, int)">deleteDirectoryA</a></strong>(java.lang.String&nbsp;path,
                int&nbsp;clientID)</code>
<div class="block">The function deleteDirectoryA immediately deletes the given directory and
 all of its contents from both the master namespace and any replicas that 
 store it.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#deleteDirectoryRedo(java.lang.String, int)">deleteDirectoryRedo</a></strong>(java.lang.String&nbsp;path,
                   int&nbsp;chunkserverID)</code>
<div class="block">The Chunkserver Restoration algorithm will call this method if the recovering chunkserver has a
 directory that, according to the Master, should not exist in the namespace.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#deleteFileMaster(java.lang.String, int)">deleteFileMaster</a></strong>(java.lang.String&nbsp;chunkhandle,
                int&nbsp;clientID)</code>
<div class="block">Adds deleteFileMaster task to scheduler.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#deleteFileMasterA(java.lang.String, int)">deleteFileMasterA</a></strong>(java.lang.String&nbsp;chunkhandle,
                 int&nbsp;clientID)</code>
<div class="block">The function deleteFileMasterA deletes all metadata for a given file from the master.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#deleteFileRedo(java.lang.String, int)">deleteFileRedo</a></strong>(java.lang.String&nbsp;chunkhandle,
              int&nbsp;chunkserverID)</code>
<div class="block">The Chunkserver Restoration algorithm will call this method if the recovering chunkserver has a
 file that, according to the Master, should not exist in the namespace.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#fetchAndRewrite(java.lang.String, int)">fetchAndRewrite</a></strong>(java.lang.String&nbsp;chunkhandle,
               int&nbsp;chunkserverID)</code>
<div class="block">The Chunkserver Restoration algorithm will call this method if the recovering chunkserver is
 behind on an append request.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#getRandomWorkingCS(java.util.List)">getRandomWorkingCS</a></strong>(java.util.List&lt;java.lang.Integer&gt;&nbsp;chunkServersNum)</code>
<div class="block">Returns a random chunkserver index when passed a list of Chunkservers.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#heartbeat(int)">heartbeat</a></strong>(int&nbsp;CSID)</code>
<div class="block">Sends heartbeat to chunkserver.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#main(java.lang.String[])">main</a></strong>(java.lang.String[]&nbsp;args)</code>
<div class="block">Main class for the Master.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#pickAndExecuteAnAction()">pickAndExecuteAnAction</a></strong>()</code>
<div class="block">Scheduler</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#read(java.lang.String, int, int)">read</a></strong>(java.lang.String&nbsp;chunkhandle,
    int&nbsp;clientID,
    int&nbsp;reqID)</code>
<div class="block">Adds read task to scheduler.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#readA(java.lang.String, int, int)">readA</a></strong>(java.lang.String&nbsp;chunkhandle,
     int&nbsp;clientID,
     int&nbsp;reqID)</code>
<div class="block">The readA function sends metadata for the appropriate chunkhandle to the 
 client that requested it.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#restoreChunkserver(int)">restoreChunkserver</a></strong>(int&nbsp;CSID)</code>
<div class="block">Restore chunkserver is passed the ID for the chunkserver that has gone down and is now recovering.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#setupMasterHost()">setupMasterHost</a></strong>()</code>
<div class="block">The format for connection should be "rmi:DOMAIN/ChunkserverID".</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#startThread()">startThread</a></strong>()</code>
<div class="block">Starts the master agent thread.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#stateChanged()">stateChanged</a></strong>()</code>
<div class="block">Threading code</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../Master/Master.html#stopThread()">stopThread</a></strong>()</code>
<div class="block">Stops the master agent.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.rmi.server.UnicastRemoteObject">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.rmi.server.UnicastRemoteObject</h3>
<code>clone, exportObject, exportObject, exportObject, unexportObject</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.rmi.server.RemoteServer">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.rmi.server.RemoteServer</h3>
<code>getClientHost, getLog, setLog</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.rmi.server.RemoteObject">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.rmi.server.RemoteObject</h3>
<code>equals, getRef, hashCode, toString, toStub</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>finalize, getClass, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="NOT_FOUND">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NOT_FOUND</h4>
<pre>static final&nbsp;java.lang.String NOT_FOUND</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../constant-values.html#Master.Master.NOT_FOUND">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="MINUTE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MINUTE</h4>
<pre>static final&nbsp;long MINUTE</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../constant-values.html#Master.Master.MINUTE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="HEARTBEAT_DELAY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HEARTBEAT_DELAY</h4>
<pre>static final&nbsp;long HEARTBEAT_DELAY</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../constant-values.html#Master.Master.HEARTBEAT_DELAY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="directory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>directory</h4>
<pre>public static&nbsp;<a href="../Utilities/Tree.html" title="class in Utilities">Tree</a> directory</pre>
</li>
</ul>
<a name="tempLock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tempLock</h4>
<pre>static&nbsp;java.lang.Integer tempLock</pre>
</li>
</ul>
<a name="masterUp">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>masterUp</h4>
<pre>boolean masterUp</pre>
</li>
</ul>
<a name="log">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>log</h4>
<pre><a href="../Utilities/OperationsLog.html" title="class in Utilities">OperationsLog</a> log</pre>
</li>
</ul>
<a name="stateChange">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stateChange</h4>
<pre>java.util.concurrent.Semaphore stateChange</pre>
</li>
</ul>
<a name="masterThread">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>masterThread</h4>
<pre>private&nbsp;<a href="../Master/Master.MasterThread.html" title="class in Master">Master.MasterThread</a> masterThread</pre>
</li>
</ul>
<a name="tasks">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tasks</h4>
<pre>java.util.List&lt;<a href="../Master/Master.Task.html" title="class in Master">Master.Task</a>&gt; tasks</pre>
</li>
</ul>
<a name="clients">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clients</h4>
<pre>java.util.Map&lt;java.lang.Integer,<a href="../Interfaces/ClientInterface.html" title="interface in Interfaces">ClientInterface</a>&gt; clients</pre>
</li>
</ul>
<a name="chunkservers">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>chunkservers</h4>
<pre>java.util.Map&lt;java.lang.Integer,<a href="../Master/Master.CSInfo.html" title="class in Master">Master.CSInfo</a>&gt; chunkservers</pre>
</li>
</ul>
<a name="heartbeat">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>heartbeat</h4>
<pre><a href="../Master/Master.Heartbeat.html" title="class in Master">Master.Heartbeat</a> heartbeat</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Master()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Master</h4>
<pre>public&nbsp;Master()
       throws java.rmi.RemoteException</pre>
<div class="block">Constructor for the Master does the following:
        - Initializes a list of chunkservers and clients to which to connect.
  - Initializes a list of tasks to be processed by Master agent code.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd><dt><span class="strong">See Also:</span></dt><dd><a href="../Master/Master.Heartbeat.html" title="class in Master"><code>- Starts the heartbeat process for chunkservers
  - Automatically attempts to connect to initial client (ID hardcoded to 11), as well as 3 chunkservers.</code></a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setupMasterHost()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setupMasterHost</h4>
<pre>public&nbsp;void&nbsp;setupMasterHost()</pre>
<div class="block">The format for connection should be "rmi:DOMAIN/ChunkserverID".  
 ChunkserverID will be different for each instance of Chunkserver.
 MasterCS is NOT the same as CSMaster.  
 MasterCS -> Master calls CS functions;  CS is host of functions.

 For this, the chunkserver is hosted on dblab-18.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/MasterInterface.html#setupMasterHost()">setupMasterHost</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/MasterInterface.html" title="interface in Interfaces">MasterInterface</a></code></dd>
</dl>
</li>
</ul>
<a name="connectToChunkserver(java.lang.Integer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connectToChunkserver</h4>
<pre>public&nbsp;void&nbsp;connectToChunkserver(java.lang.Integer&nbsp;id)</pre>
<div class="block">Connects to Chunkserver ID.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/MasterInterface.html#connectToChunkserver(java.lang.Integer)">connectToChunkserver</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/MasterInterface.html" title="interface in Interfaces">MasterInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - - ID of Chunkserver to which to connect.  Referenced in Map<Integer, CSInfo> chunkservers</dd></dl>
</li>
</ul>
<a name="connectToClient(java.lang.Integer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connectToClient</h4>
<pre>public&nbsp;void&nbsp;connectToClient(java.lang.Integer&nbsp;id)</pre>
<div class="block">Connects to Client ID</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/MasterInterface.html#connectToClient(java.lang.Integer)">connectToClient</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/MasterInterface.html" title="interface in Interfaces">MasterInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - - Client to which to be connected.  Referenced in Map<Integer, ClientInterface> clients</dd></dl>
</li>
</ul>
<a name="stateChanged()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stateChanged</h4>
<pre>protected&nbsp;void&nbsp;stateChanged()</pre>
<div class="block">Threading code</div>
</li>
</ul>
<a name="startThread()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startThread</h4>
<pre>public&nbsp;void&nbsp;startThread()</pre>
<div class="block">Starts the master agent thread.</div>
</li>
</ul>
<a name="stopThread()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopThread</h4>
<pre>public&nbsp;void&nbsp;stopThread()</pre>
<div class="block">Stops the master agent.</div>
</li>
</ul>
<a name="createFile(java.lang.String, java.lang.String, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createFile</h4>
<pre>public&nbsp;void&nbsp;createFile(java.lang.String&nbsp;path,
              java.lang.String&nbsp;fileName,
              int&nbsp;numReplicas,
              int&nbsp;clientID)
                throws java.rmi.RemoteException</pre>
<div class="block">Adds createFile task to scheduler.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/MasterInterface.html#createFile(java.lang.String, java.lang.String, int, int)">createFile</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/MasterInterface.html" title="interface in Interfaces">MasterInterface</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="deleteFileMaster(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteFileMaster</h4>
<pre>public&nbsp;void&nbsp;deleteFileMaster(java.lang.String&nbsp;chunkhandle,
                    int&nbsp;clientID)
                      throws java.rmi.RemoteException</pre>
<div class="block">Adds deleteFileMaster task to scheduler.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/MasterInterface.html#deleteFileMaster(java.lang.String, int)">deleteFileMaster</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/MasterInterface.html" title="interface in Interfaces">MasterInterface</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="createDirectory(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createDirectory</h4>
<pre>public&nbsp;void&nbsp;createDirectory(java.lang.String&nbsp;path,
                   int&nbsp;clientID)
                     throws java.rmi.RemoteException</pre>
<div class="block">Adds createDirectory task to scheduler.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/MasterInterface.html#createDirectory(java.lang.String, int)">createDirectory</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/MasterInterface.html" title="interface in Interfaces">MasterInterface</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="deleteDirectory(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteDirectory</h4>
<pre>public&nbsp;void&nbsp;deleteDirectory(java.lang.String&nbsp;path,
                   int&nbsp;clientID)
                     throws java.rmi.RemoteException</pre>
<div class="block">Adds deleteDirectory task to scheduler.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/MasterInterface.html#deleteDirectory(java.lang.String, int)">deleteDirectory</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/MasterInterface.html" title="interface in Interfaces">MasterInterface</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="append(java.lang.String, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>append</h4>
<pre>public&nbsp;void&nbsp;append(java.lang.String&nbsp;chunkhandle,
          int&nbsp;clientID,
          int&nbsp;reqID)
            throws java.rmi.RemoteException</pre>
<div class="block">Adds append task to scheduler.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/MasterInterface.html#append(java.lang.String, int, int)">append</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/MasterInterface.html" title="interface in Interfaces">MasterInterface</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="atomicAppend(java.lang.String, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>atomicAppend</h4>
<pre>public&nbsp;void&nbsp;atomicAppend(java.lang.String&nbsp;chunkhandle,
                int&nbsp;clientID,
                int&nbsp;reqID)
                  throws java.rmi.RemoteException</pre>
<div class="block">Adds atomicAppend task to scheduler.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/MasterInterface.html#atomicAppend(java.lang.String, int, int)">atomicAppend</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/MasterInterface.html" title="interface in Interfaces">MasterInterface</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="read(java.lang.String, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;void&nbsp;read(java.lang.String&nbsp;chunkhandle,
        int&nbsp;clientID,
        int&nbsp;reqID)
          throws java.rmi.RemoteException</pre>
<div class="block">Adds read task to scheduler.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/MasterInterface.html#read(java.lang.String, int, int)">read</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/MasterInterface.html" title="interface in Interfaces">MasterInterface</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="heartbeat(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>heartbeat</h4>
<pre>public&nbsp;void&nbsp;heartbeat(int&nbsp;CSID)
               throws java.rmi.RemoteException</pre>
<div class="block">Sends heartbeat to chunkserver.  If the chunkserver is up, also set the last good time to current system timestamp.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../Interfaces/MasterInterface.html#heartbeat(int)">heartbeat</a></code>&nbsp;in interface&nbsp;<code><a href="../Interfaces/MasterInterface.html" title="interface in Interfaces">MasterInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>CSID</code> - - Chunkserver ID to be sent heartbeat.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="pickAndExecuteAnAction()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pickAndExecuteAnAction</h4>
<pre>protected&nbsp;boolean&nbsp;pickAndExecuteAnAction()</pre>
<div class="block">Scheduler</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true after action performed; when no tasks need to be performed, the method
        returns false.  This stops the agent until a stateChanged() is called.</dd></dl>
</li>
</ul>
<a name="createFileA(java.lang.String, java.lang.String, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createFileA</h4>
<pre>public&nbsp;void&nbsp;createFileA(java.lang.String&nbsp;path,
               java.lang.String&nbsp;fileName,
               int&nbsp;numReplicas,
               int&nbsp;clientID)
                 throws java.rmi.RemoteException</pre>
<div class="block">Function createFileA creates a new file in the master namespace.
 It is exclusively a handshake and does not transfer data, although it does result in
 creation of the file on the chunkservers. The default number of replicas is three (one copy on each
 chunkserver), and the maximum number of replicas is also 3.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>path</code> - - Path of file to be created</dd><dd><code>fileName</code> - - name of file.</dd><dd><code>numReplicas</code> - - number of replicas to be created.</dd><dd><code>clientID</code> - - ID of client sending request.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="deleteFileMasterA(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteFileMasterA</h4>
<pre>public&nbsp;void&nbsp;deleteFileMasterA(java.lang.String&nbsp;chunkhandle,
                     int&nbsp;clientID)
                       throws java.rmi.RemoteException</pre>
<div class="block">The function deleteFileMasterA deletes all metadata for a given file from the master.
 It also orders the chunkservers storing the file itself to remove the file and its 
 corresponding metadata.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - - Path + name of file referenced.</dd><dd><code>clientID</code> - - ID of Client calling to delete file.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="createDirectoryA(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createDirectoryA</h4>
<pre>public&nbsp;void&nbsp;createDirectoryA(java.lang.String&nbsp;path,
                    int&nbsp;clientID)
                      throws java.rmi.RemoteException</pre>
<div class="block">The function createDirectoryA creates a directory within the master namespace.
 It also orders for the directory to be created on all chunkservers.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>path</code> - - path of directory to be created.</dd><dd><code>clientID</code> - - ID of client calling createDirectory</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="deleteDirectoryA(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteDirectoryA</h4>
<pre>public&nbsp;void&nbsp;deleteDirectoryA(java.lang.String&nbsp;path,
                    int&nbsp;clientID)
                      throws java.rmi.RemoteException</pre>
<div class="block">The function deleteDirectoryA immediately deletes the given directory and
 all of its contents from both the master namespace and any replicas that 
 store it.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>path</code> - - path of directory to be deleted.</dd><dd><code>clientID</code> - - ID of client calling deleteDirectory</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="appendA(java.lang.String, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>appendA</h4>
<pre>public&nbsp;void&nbsp;appendA(java.lang.String&nbsp;chunkhandle,
           int&nbsp;clientID,
           int&nbsp;reqID)
             throws java.rmi.RemoteException</pre>
<div class="block">The appendA function returns metadata sufficient for an append to the client
 that has requested it. The parameter for primaryLease passed to the client is 
 null because no primary lease is required.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - - chunkhandle of the file to which to be appended</dd><dd><code>clientID</code> - - ID of client calling file append</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="readA(java.lang.String, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readA</h4>
<pre>public&nbsp;void&nbsp;readA(java.lang.String&nbsp;chunkhandle,
         int&nbsp;clientID,
         int&nbsp;reqID)
           throws java.rmi.RemoteException</pre>
<div class="block">The readA function sends metadata for the appropriate chunkhandle to the 
 client that requested it. Like append, it sends a null parameter for the primary
 lease chunkserver.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - - chunkhandle of file to be read.</dd><dd><code>clientID</code> - - ID of client sending read request</dd><dd><code>reqID</code> - - request ID.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="atomicAppendA(java.lang.String, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>atomicAppendA</h4>
<pre>public&nbsp;void&nbsp;atomicAppendA(java.lang.String&nbsp;chunkhandle,
                 int&nbsp;clientID,
                 int&nbsp;reqID)
                   throws java.rmi.RemoteException</pre>
<div class="block">The function atomicAppendA sends the client in clientID the metadata required
 for an atomic append. If a primary lease already exists, it sends that data
 to the client. If the primary lease does not exist, it picks a random chunkserver
 that is storing the replica for the file and issues a primary lease before 
 messaging the client.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - - chunkhandle of file to which to be atomically appended.</dd><dd><code>clientID</code> - - ID of client calling atomicAppend.</dd><dd><code>reqID</code> - - request ID.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="restoreChunkserver(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreChunkserver</h4>
<pre>public&nbsp;void&nbsp;restoreChunkserver(int&nbsp;CSID)
                        throws java.rmi.RemoteException</pre>
<div class="block">Restore chunkserver is passed the ID for the chunkserver that has gone down and is now recovering.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>CSID</code> - - Chunkserver ID to be restored.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="createDirectoryRedo(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createDirectoryRedo</h4>
<pre>public&nbsp;boolean&nbsp;createDirectoryRedo(java.lang.String&nbsp;path,
                          int&nbsp;chunkserverID)
                            throws java.rmi.RemoteException</pre>
<div class="block">The Chunkserver Restoration algorithm will call this method if a chunkserver needs to run
 a createDirectory to catch up with current version of data.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>path</code> - - path of directory to be created.</dd><dd><code>chunkserverID</code> - - ID of chunkserver that needs directory.</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if message sent to chunkserver; false if message send failed.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="createFileRedo(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createFileRedo</h4>
<pre>public&nbsp;boolean&nbsp;createFileRedo(java.lang.String&nbsp;chunkhandle,
                     int&nbsp;chunkserverID)
                       throws java.rmi.RemoteException</pre>
<div class="block">The Chunkserver Restoration algorithm will call this method if a chunkserver needs to
 create a file it should have.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - - chunkhandle path to be created.</dd><dd><code>chunkserverID</code> - - ID of chunkserver that needs file.</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if chunkserver(ID) is up for the message-pass; if not, return false.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="deleteFileRedo(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteFileRedo</h4>
<pre>public&nbsp;boolean&nbsp;deleteFileRedo(java.lang.String&nbsp;chunkhandle,
                     int&nbsp;chunkserverID)
                       throws java.rmi.RemoteException</pre>
<div class="block">The Chunkserver Restoration algorithm will call this method if the recovering chunkserver has a
 file that, according to the Master, should not exist in the namespace.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - - chunkhandle of file to be deleted.</dd><dd><code>chunkserverID</code> - - ID of chunkserver that needs to delete a file.</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if chunkserver(ID) is up for the message-pass; if not, return false.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="deleteDirectoryRedo(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteDirectoryRedo</h4>
<pre>public&nbsp;boolean&nbsp;deleteDirectoryRedo(java.lang.String&nbsp;path,
                          int&nbsp;chunkserverID)
                            throws java.rmi.RemoteException</pre>
<div class="block">The Chunkserver Restoration algorithm will call this method if the recovering chunkserver has a
 directory that, according to the Master, should not exist in the namespace.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>path</code> - - path of directory to be deleted.</dd><dd><code>chunkserverID</code> - - id of chunkserver that needs to delete a directory.</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if chunkserver(ID) is up for the message-pass; if not, 
 error in connecting to chunkserver and return false.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="fetchAndRewrite(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchAndRewrite</h4>
<pre>public&nbsp;boolean&nbsp;fetchAndRewrite(java.lang.String&nbsp;chunkhandle,
                      int&nbsp;chunkserverID)
                        throws java.rmi.RemoteException</pre>
<div class="block">The Chunkserver Restoration algorithm will call this method if the recovering chunkserver is
 behind on an append request.  The system will look for replicas that have the file with up-to-date
 timestamps.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>chunkhandle</code> - - chunkhandle that needs to re-append.</dd><dd><code>chunkserverID</code> - - ID of chunkserver that needs append to file chunkhandle.</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if chunkserver(ID) is up for the message-pass; if not, 
 error in connecting to chunkserver and return false.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd></dl>
</li>
</ul>
<a name="getRandomWorkingCS(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRandomWorkingCS</h4>
<pre>public&nbsp;int&nbsp;getRandomWorkingCS(java.util.List&lt;java.lang.Integer&gt;&nbsp;chunkServersNum)</pre>
<div class="block">Returns a random chunkserver index when passed a list of Chunkservers.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>chunkServersNum</code> - - list of chunkservers passed.</dd>
<dt><span class="strong">Returns:</span></dt><dd>integer of random chunkserver, created by Random, indexed by
 chunkServersNum.get(chosenIndex), referenced by chunkservers.get(chosenID)</dd></dl>
</li>
</ul>
<a name="main(java.lang.String[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)</pre>
<div class="block">Main class for the Master.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>args</code> - </dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Master.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../Master/Master.CSInfo.html" title="class in Master"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?Master/Master.html" target="_top">Frames</a></li>
<li><a href="Master.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
